# values.yaml
kubeProxyReplacement: true
k8sServiceHost: "192.168.0.4"
k8sServicePort: 6443

# Cilium Agent metrics
prometheus:
  enabled: true
  port: 9966
  metrics:
    - cilium_bpf_map_pressure
    - cilium_drop_totalcilium_forward_total
    - cilium_forward_total

# Operator metrics
operator:
  replicas: 1
  prometheus:
    enabled: true
    port: 9963

# Hubble
hubble:
  enabled: true
  relay:
    enabled: true
  ui:
    enabled: true
  metrics:
    enabledOpenMetrics: true
    port: 9965
    enabled:
      - dns
      - "drop:sourceContext=pod;destinationContext=pod"
      - tcp
      - flow
      - port-distribution
      - httpV2
      - policy

# IPAM
ipam:
  mode: cluster-pool # kubeadm init --pod-network-cidr 무시
  operator:
    clusterPoolIPv4PodCIDRList: ["10.43.0.0/16"] # 클러스터 전체 CIDR. kubeadm과 똑같이 하는 것이 혼동이 적음
    clusterPoolIpv4MaskSize: 24 # Node단위 서브넷 CIDR
    clusterPoolIPv6PodCIDRList: ["fd00::/104"] # default
    clusterPoolIPv6MaskSize: 120 # default

# Masquerade(NAT)
enableIpv4Masquerade: true
enableIpv6Masquerade: false

# NetworkPolicy
enableNetworkPolicy: true

# Security
encryption:
  enabled: true
  type: wireguard
